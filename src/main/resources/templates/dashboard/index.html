<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout" layout:decorate="~{layout/base}">
<body>
    <div layout:fragment="content">

        <h3 class="mb-3">Today Tasks</h3>

        <div class="row">
            <div class="col">
                <ul class="list-unstyled d-flex flex-row">
                    <li th:each="entry : ${completedMap}" class="d-inline-block me-3 mb-2">
                        <button type="button" class="btn btn-primary btn-lg btn-floating" style="height: 64px; width: 64px;" data-mdb-ripple-init>
                            <span th:text="${entry.key}"></span>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill badge-info" th:text="${entry.value}" style="font-size: 1rem;">
                            <span class="visually-hidden">Task status</span>
                            </span>
                        </button>
                    </li>
                </ul>
            </div>
        </div>

        <div class="row">

            <!-- Tabs navs -->
            <ul class="nav nav-tabs mb-3" id="ex-with-icons" role="tablist">
                <li class="nav-item" role="presentation">
                    <a data-mdb-tab-init class="nav-link active" id="ex-with-icons-tab-1" href="#ex-with-icons-tabs-1" role="tab"
                       aria-controls="ex-with-icons-tabs-1" aria-selected="true"><i class="fas fa-chart-pie fa-fw me-2"></i>Current</a>
                </li>
                <li class="nav-item" role="presentation">
                    <a data-mdb-tab-init class="nav-link" id="ex-with-icons-tab-2" href="#ex-with-icons-tabs-2" role="tab"
                       aria-controls="ex-with-icons-tabs-2" aria-selected="false"><i class="fas fa-chart-line fa-fw me-2"></i>Complete</a>
                </li>
            </ul>
            <!-- Tabs navs -->

            <!-- Tabs content -->
            <div class="tab-content" id="ex-with-icons-content">
                <div class="tab-pane fade show active" id="ex-with-icons-tabs-1" role="tabpanel" aria-labelledby="ex-with-icons-tab-1">
                    <ul class="list-unstyled" th:each="taskInstance : ${incompleteTasks}">
                        <li class="mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title" th:text="${taskInstance.title}"></h5>
                                    <p class="card-text" th:text="${taskInstance.description}"></p>
                                    <a th:href="@{/dashboard/task-instances/toggle/{id}(id=${taskInstance.id})}" th:class="${taskInstance.completed} ? 'btn btn-success' : 'btn btn-primary'" data-mdb-ripple-init>
                                        <span th:text="${taskInstance.completed} ? 'Mark as Incomplete' : 'Complete'"></span>
                                    </a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>

                <div class="tab-pane fade" id="ex-with-icons-tabs-2" role="tabpanel" aria-labelledby="ex-with-icons-tab-2">
                    <ul class="list-unstyled" th:each="taskInstance : ${completedTasks}">
                        <li class="mb-3">
                            <div class="card">
                                <div class="card-body">
                                    <h5 class="card-title" th:text="${taskInstance.title}"></h5>
                                    <p class="card-text" th:text="${taskInstance.description}"></p>
                                    <a th:href="@{/dashboard/task-instances/toggle/{id}(id=${taskInstance.id})}" th:class="${taskInstance.completed} ? 'btn btn-success' : 'btn btn-primary'" data-mdb-ripple-init>
                                        <span th:text="${taskInstance.completed} ? 'Mark as Incomplete' : 'Complete'"></span>
                                    </a>
                                </div>
                            </div>
                        </li>
                    </ul>
                </div>

            </div>
            <!-- Tabs content -->
        </div>
    </div>
</body>
</html>
